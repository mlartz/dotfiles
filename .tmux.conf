# Tmux Configuration File
# =====================

# Prefix Key Configuration
# ------------------------
# Unbind the default prefix key (Ctrl-b)
unbind-key C-b

# Set the prefix key to Ctrl-\ (more ergonomic and less likely to conflict with other tools)
set-option -g prefix 'C-\'

# Allow sending the prefix key to nested tmux sessions by pressing it twice
bind-key 'C-\' send-prefix


# Emacs/Vim Compatibility
# ------------------------
# Fix delay when pressing ESC in Emacs/Vim (essential for modal editing)
set -sg escape-time 0

# Use emacs key bindings in tmux command prompt (status line)
set -g status-keys emacs


# Terminal Settings
# -----------------
# Enable 256 color support for better syntax highlighting
set -g default-terminal "screen-256color"

# Enable mouse support (useful for scrolling, pane selection, and resizing)
set -g mouse on


# Session Management
# ------------------
# Increase scrollback buffer size from default 2000 to 50000 lines
set -g history-limit 50000

# Start window numbering at 1 instead of 0 (easier to reach on keyboard)
set -g base-index 1

# Start pane numbering at 1 instead of 0
setw -g pane-base-index 1

# Renumber windows sequentially when one is closed
set -g renumber-windows on

# Allow automatic renaming of windows based on running command
set -g allow-rename on


# Remote Session Optimization
# ----------------------------
# Aggressive resize: only constrain window size when actively viewing
# (prevents smaller terminal from constraining larger ones)
setw -g aggressive-resize on

# Monitor activity in windows
setw -g monitor-activity on

# Don't display activity messages in status line
set -g visual-activity off

# Display tmux messages for 3 seconds
set -g display-time 3000

# Refresh status bar every 15 seconds
set -g status-interval 15


# Key Bindings
# ------------
# Split panes with intuitive keys (| for vertical, - for horizontal)
# Also maintain current path when splitting
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Easy config reload without restarting tmux
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Don't detach tmux when killing a session
set -g detach-on-destroy off


# Status Bar Configuration
# -------------------------
# Increase left side length for session name display
set -g status-left-length 40

# Display hostname, date, and time on right side
set -g status-right "#H | %Y-%m-%d %H:%M"
